"use strict";(self.webpackChunkrealCookieBanner_name_=self.webpackChunkrealCookieBanner_name_||[]).push([[718],{2524:function(e,t,n){n.r(t),n.d(t,{CookieGroupsTabRouter:function(){return fe}});var a=n(7109),r=n(9591),o=n(7938),c=n(7228),i=n(9440),l=n(5450),s=n.n(l),u=n(7363),m=n(3554),p=n(5071),d=n(6711),g=n(4614),f=n(4741),R=n(2519),E=n(8782),h=n(4115),_=n(6315),v=n(9323),y={labelCol:{span:24},wrapperCol:{span:24}},k=(0,m.Pi)((function(e){var t=e.onClose,n=e.edit,a=e.navigateAfterCreation,i=void 0===a||a,l=_.Z.useForm(),m=(0,c.Z)(l,1)[0],k=(0,u.useState)(!1),b=(0,c.Z)(k,2),Z=b[0],C=b[1],w=(0,d.useHistory)(),S=(0,g.m)(),x=S.cookieStore,T=S.optionStore.others.defaultCookieGroupTexts[(null==n?void 0:n.data.name)||""],M=(0,d.useRouteMatch)().path,P=null==n?void 0:n.data,O=n?{name:P.name,description:P.description}:{name:"",description:""},G=(0,u.useCallback)(function(){var e=(0,o.Z)(s().mark((function e(t){var a,r,o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=8;break}return n.setName(t.name),n.setDescription(t.description),e.next=6,n.patch();case 6:e.next=12;break;case 8:return a=new v.O(x.groups,{name:t.name,description:t.description,meta:{order:x.groups.entries.size}}),e.next=11,a.persist();case 11:i&&w.push(M.replace(":cookieGroup?",a.key.toString()));case 12:e.next=19;break;case 14:throw e.prev=14,e.t0=e.catch(0),r=e.t0.responseJSON,o=r.code,c=(0,h.Z)(r,["code"]),E.ZP.error(["term_exists","duplicate_term_slug"].indexOf(o)>-1?(0,p.__)("The service group already exists!"):c.message),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[n]),N=(0,u.useCallback)(function(){var e=(0,o.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,G(n);case 4:m.resetFields(),null==t||t(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,C(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])})));return function(t){return e.apply(this,arguments)}}(),[t,G,m]),A=(0,u.useCallback)((function(e){e.stopPropagation()}),[]);return React.createElement(r.Z,{spinning:Z},React.createElement("strong",null,n?(0,p.__)("Edit service group"):(0,p.__)("Add new service group")),React.createElement("hr",null),React.createElement(_.Z,(0,f.Z)({name:"edit-group-form",initialValues:O,form:m,onFinish:N},y,{style:{width:300}}),React.createElement(_.Z.Item,{label:(0,p.__)("Name"),name:"name",required:!0,style:{marginBottom:12},rules:[{required:!0,message:(0,p.__)("Please enter a name!")}]},React.createElement(R.Z,{autoFocus:!0,onKeyDown:A})),React.createElement(_.Z.Item,{label:React.createElement(React.Fragment,null,(0,p.__)("Description"),!!T&&React.createElement(_.Z.Item,{shouldUpdate:function(e,t){return e.name!==t.name},noStyle:!0},(function(e){return(0,e.getFieldValue)("description")!==T&&React.createElement("button",{className:"button button-small",type:"button",style:{minHeight:"auto",lineHeight:1,padding:5,zoom:.7,marginLeft:10},onClick:function(){return m.setFieldsValue({description:T})}},React.createElement("span",{className:"dashicons dashicons-image-rotate"}))}))),name:"description",required:!0,style:{marginBottom:12},rules:[{required:!0,message:(0,p.__)("Please enter a description!")}]},React.createElement(R.Z.TextArea,{autoSize:!0,onKeyDown:A})),React.createElement(_.Z.Item,null,React.createElement("button",{className:"button",onClick:function(e){e.preventDefault(),null==t||t()}},(0,p.__)("Cancel")),React.createElement("input",{type:"submit",className:"button button-primary right",value:(0,p.__)("Save")}))))})),b=n(7681),Z=n(6107),C=n(3571),w=n(9455),S=n(6142),x=function(e){var t=e.count,n=(0,u.useMemo)((function(){for(var e=[],n=0;n<t;n++)e.push({key:n});return e}),[t]);return React.createElement(w.ZP,{dataSource:n,renderItem:function(){return React.createElement(w.ZP.Item,null,React.createElement(S.Z,{loading:!0,active:!0,avatar:{size:"large"},paragraph:{rows:1}}))}})},T=n(5235),M=n(1857),P=n(9943),O=n(7870),G=n(6310),N=n(8081),A=n(238),I=n(3251),D=n(7908),F=n(6800),L=n(4290),z=n(294),B=G.Z.Paragraph,U=(0,m.Pi)((function(e){var t=e.item,n=(0,g.m)(),a=n.optionStore,o=a.ePrivacyUSA,c=a.consentForwarding,i=a.others.hints.deleteCookie,l=n.cookieStore.essentialGroup,s=(0,A.R)().editLink,u=(0,I.w)(),m=t.key,d=t.busy,f=t.data,R=t.firstTechnicalDefinition,E=t.presetModel,h=f.title,_=f.slug,v=f.content,y=f.status,k=f.meta,b=k.noTechnicalDefinitions,C=k.consentForwardingUniqueName,S=k.legalBasis,x=k.ePrivacyUSA,G=k.codeOptIn,U=k.codeOptInNoGoogleTagManager,q=k.codeOptInNoMatomoTagManager,H=k.codeOptOut,K=k.codeOptOutDelete,V=k.codeOptOutNoGoogleTagManager,W=k.codeOptOutNoMatomoTagManager,j=k.codeOnPageLoad,J=k.presetId,Y=f["rcb-cookie-group"][0]===l.key;return React.createElement(w.ZP.Item,{itemID:m.toString(),actions:[React.createElement("a",{key:"edit",href:s(t),style:{textDecoration:"none"}},(0,p.__)("Edit")),"real-cookie-banner"!==J?React.createElement(P.Z,{key:"delete",title:(0,N.E)([(0,p.__)("Are you sure you want to delete this service?")].concat((0,O.Z)(i)).join("\n\n")),placement:"bottomRight",onConfirm:function(){return t.delete({force:!0})},okText:(0,p.__)("Delete"),cancelText:(0,p.__)("Cancel"),overlayStyle:{maxWidth:350}},React.createElement("a",{style:{cursor:"pointer"}},(0,p.__)("Delete"))):React.createElement(M.Z,{placement:"topRight",arrowPointAtCenter:!0,overlay:(0,p.__)('The "%s" service cannot be deleted.',h.raw)},React.createElement("a",{style:{opacity:.5}},(0,p.__)("Delete"))),React.createElement("a",{key:"drag",style:{cursor:"move"}},React.createElement(D.Z,null))]},React.createElement(r.Z,{spinning:d},React.createElement(w.ZP.Item.Meta,{avatar:E?React.createElement(T.C,{size:"large",src:E.fullLogoUrl,shape:"square"}):React.createElement(T.C,{size:"large",style:{backgroundColor:b?"#4ea29a":u[R.type].backgroundColor}},b?(0,p.__)("None"):u[R.type].abbr),title:React.createElement("span",null,h.raw," ","draft"===y?React.createElement(Z.Z,{color:"orange"},(0,p.__)("Draft")):"private"===y?React.createElement(Z.Z,{color:"red"},(0,p.__)("Disabled")):null,!!f.meta.presetId&&React.createElement(Z.Z,null,(0,p.__)("Created from template")),!!b&&React.createElement(Z.Z,null,(0,p.__)("No technical cookies")),!!x&&o&&React.createElement(Z.Z,null,(0,p.__)("US data processing")),!Y&&"legitimate-interest"===S&&React.createElement(Z.Z,null,(0,p.__)("Legitimate interest (Opt-out)")),Y&&"legal-requirement"===S&&React.createElement(Z.Z,null,(0,p.__)("Compliance with a legal obligation"))),description:React.createElement("div",null,!!v.raw&&React.createElement(B,{style:{color:"inherit",marginBottom:0},ellipsis:{rows:3}},(0,N.E)(v.raw)),!!(G||H||j)&&React.createElement("div",{style:{paddingTop:5}},(0,p.__)("Executes code on"),":"," ",!!G&&React.createElement(Z.Z,null,(0,p.__)("Opt-in"),!1!==t.tagManagerSettings&&(U||q)&&React.createElement(M.Z,{title:(0,p.__)("Only run this script if the user has not consented to use %s","googleTagManager"===t.tagManagerSettings.type?z.Gh:z.Ki)},React.createElement("span",null," ",React.createElement(F.Z,null)))),!!H&&!Y&&React.createElement(Z.Z,null,(0,p.__)("Opt-out"),!1!==t.tagManagerSettings&&(V||W)&&React.createElement(M.Z,{title:(0,p.__)("Only run this script if the user has not consented to use %s","googleTagManager"===t.tagManagerSettings.type?z.Gh:z.Ki)},React.createElement("span",null," ",React.createElement(F.Z,null))),K&&React.createElement(M.Z,{title:(0,p.__)("Delete all first-party cookies after opt-out. First-party cookies are only cookies that are set by or for this domain.")},React.createElement("span",null," ",React.createElement(L.Z,null)))),!!j&&React.createElement(Z.Z,null,(0,p.__)("Display banner"))),!1!==t.tagManagerSettings&&React.createElement("div",{style:{paddingTop:5}},t.tagManagerSettings.thisScriptIsManager?React.createElement("span",null,(0,p.__)("Opt-in script loads"),":"," ",React.createElement(Z.Z,null,"googleTagManager"===t.tagManagerSettings.type?(0,p.__)("Google Tag Manager"):(0,p.__)("Matomo Tag Manager"))):React.createElement("span",null,"googleTagManager"===t.tagManagerSettings.type?(0,p.__)("Google Tag Manager Events"):(0,p.__)("Matomo Tag Manager Events"),":"," ",React.createElement(Z.Z,null,React.createElement("strong",null,(0,p.__)("Opt-in"),": "),t.tagManagerSettings.eventName.in||(0,p.__)("None")),React.createElement(Z.Z,null,React.createElement("strong",null,(0,p.__)("Opt-out"),": "),t.tagManagerSettings.eventName.out||(0,p.__)("None")))),c&&React.createElement("div",{style:{paddingTop:5}},(0,p.__)("Consent Forwarding Unique Name"),":"," ",React.createElement(Z.Z,null,C||_)))})))})),q=n(1944),H=function(){var e=(0,A.R)(),t=e.group.data.name,n=e.addCookieLink;return React.createElement(q.Z,{description:(0,p._i)((0,p.__)("You have not yet created a service in {{strong}}%s{{/strong}}.",t),{strong:React.createElement("strong",null)})},React.createElement("a",{className:"button button-primary",href:n},(0,p.__)("Create service (cookie)")))},K=n(5311),V=n.n(K),W=".rcb-antd-list > div > .rcb-antd-spin-container",j=(0,m.Pi)((function(){var e=(0,g.m)(),t=e.optionStore.isOnlyRcbCookieCreated,n=e.cookieStore.essentialGroup,a=(0,A.R)(),r=a.group,o=a.addCookieLink,c=r.cookies,i=r.cookiesCount,l=c.busy,s=c.sortedCookies,m=function(){var e=(0,u.useRef)(),t=(0,A.R)().group,n=(0,g.m)().cookieStore,a=t.cookies.entries.size;return(0,u.useLayoutEffect)((function(){if(e.current&&a>1){var n=function(){var n=V()(e.current).find(W);n.sortable({axis:"y",start:function(e,t){t.placeholder.height(t.item.height())},update:function(){var e=n.sortable("toArray",{attribute:"itemid"}).map(Number);t.cookies.orderCookies(e)}})};n();var r=setInterval(n,1e3);return function(){clearInterval(r);try{V()(e.current).find(W).sortable("destroy")}catch(e){}}}return function(){}}),[e.current,a,n]),e}(),d=n.key===r.key?!t:i>0;return(0,u.useEffect)((function(){r.fetchCookies()}),[]),React.createElement("div",{ref:m},d?React.createElement(React.Fragment,null,React.createElement("div",{className:"wp-clearfix"},React.createElement("a",{href:o,className:"button button-primary right",style:{marginBottom:10}},(0,p.__)("Add service"))),l?React.createElement(x,{count:i}):React.createElement(w.ZP,null,s.map((function(e){return React.createElement(U,{item:e,key:"".concat(r.key,"-").concat(e.key)})})))):React.createElement(H,null))})),J=n(2711),Y=n(2982),Q=n(4453),X=n(4342),$=n(9372),ee=n(2185),te=n(7802),ne=n(9033),ae=n(2965),re=(0,m.Pi)((function(){var e=(0,g.m)(),t=e.cookieStore,n=e.optionStore.allCookieCount,a=t.presetsCookie,i=t.busyPresetsCookie,l=(0,u.useState)(),m=(0,c.Z)(l,2),d=m[0],f=m[1],R=(0,u.useState)(!1),E=(0,c.Z)(R,2),_=E[0],v=E[1],y=(0,ee.u)(),k=y.logoUrl,b=y.openDialog,Z=(0,te.y)(),C=Z.force,w=Z.attributes,S=Z.navigateAfterCreation,x=void 0===S||S,T=(0,u.useCallback)(function(){var e=(0,o.Z)(s().mark((function e(n){var a,r,o,c,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),a=t.presetsCookie.get(n),e.next=4,a.fetchAttributes();case 4:r=a.data,o=r.identifier,c=r.version,i=a.attributes,f({identifier:o,version:c,attributes:(0,J.Z)((0,J.Z)({},i),w?JSON.parse(w):{})}),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),M=(0,u.useCallback)((function(e){!1===e?f(!1):T(e.identifier)}),[T]);return(0,u.useEffect)((function(){function e(){return(e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchPresetsCookie();case 2:C&&("scratch"===C?f(!!w&&{attributes:JSON.parse(w),identifier:void 0,version:void 0}):T(C));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),void 0===d?React.createElement(Y.f,null,C?React.createElement(r.Z,{spinning:!0}):React.createElement(r.Z,{spinning:_},React.createElement(Q.j,{type:"cookie",presets:Array.from(a.values()).map((function(e){var t=e.data,n=(t.logoFile,(0,h.Z)(t,["logoFile"])),a=e.fullLogoUrl;return(0,J.Z)((0,J.Z)({},n),{},{logoUrl:a})})),fetchingPresets:i,onSelect:M,quickLinks:[{id:"from-scratch",cover:React.createElement(ne.Z,{style:{paddingTop:25,fontSize:70}}),title:(0,p.__)("Create from scratch"),description:(0,p.__)("an individual service"),onClick:function(){return M(!1)}},{id:"scanner",cover:React.createElement(ae.Z,{style:{paddingTop:25,fontSize:70}}),title:(0,p.__)("Scan website"),description:(0,p.__)("and find used service"),onClick:function(){return window.location.hash="#/scanner"}},{id:"cookie-experts",cover:React.createElement("img",{src:k,style:{display:"block",paddingTop:15,margin:"auto",height:95}}),title:"Cookie Experts",description:(0,p.__)("help you with the setup"),onClick:b}]},React.createElement("h1",{style:{margin:"20px 0"}},(0,p.__)("...or create it from one of our templates")),n<3&&React.createElement(X.r,{url:(0,p.__)("https://devowl.io/knowledge-base/real-cookie-banner-find-all-cookies/"),label:(0,p.__)("How do I find all services (cookies) on my website?"),style:{marginBottom:10}})))):React.createElement(Y.f,{maxWidth:"fixed"},React.createElement($.ZG,{preset:!1===d?void 0:{identifier:d.identifier,version:d.version,contentBlockerPresets:a.get(d.identifier).data.blockerPresets},attributes:!1===d?void 0:d.attributes,navigateAfterCreation:x}))})),oe=n(8439),ce=n(5889),ie=n(3612),le=(0,m.Pi)((function(){var e=(0,d.useRouteMatch)().path,t=(0,g.m)().cookieStore,n=t.unassignedCookies,a=t.essentialGroup,r=(0,ie.v)("cookie");return React.createElement(d.Switch,null,React.createElement(React.Fragment,null,React.createElement(oe.K,{identifier:"cookie"}),React.createElement(d.Route,{path:e,exact:!0},n.size>0&&React.createElement("div",{style:{textAlign:"center",marginBottom:15}},React.createElement(b.Z,{placement:"bottomRight",overlay:React.createElement(C.Z,null,Array.from(n.values()).map((function(e){var t=e.id,n=e.title;return React.createElement(C.Z.Item,{key:t},React.createElement("a",{href:"#/cookies/".concat(a.key,"/edit/").concat(t)},n))})))},React.createElement("a",null,React.createElement(Z.Z,{color:"red"},React.createElement(ce.Z,null)," ",(0,p._n)("One unassigned service","%d unassigned services",n.size,n.size))))),React.createElement(j,null),React.createElement("p",{className:"description",style:{maxWidth:800,margin:"30px auto 0",textAlign:"center"}},r)),React.createElement(d.Route,{path:"".concat(e,"/new")},React.createElement(re,null)),React.createElement(d.Route,{path:"".concat(e,"/edit/:cookie")},React.createElement(Y.f,{maxWidth:"fixed"},React.createElement($.ZG,null)))))})),se=n(5351),ue=n(1543),me=(0,m.Pi)((function(e){var t=e.group,n=(0,g.m)(),i=n.optionStore.others.hints.deleteCookieGroup,l=n.cookieStore.essentialGroup,m=(0,d.useRouteMatch)(),f=m.path,R=m.isExact,E=t.busy,h=t.data,_=h.id,v=h.name,y=h.description,b=(0,u.useState)(!1),Z=(0,c.Z)(b,2),C=Z[0],w=Z[1],S=(0,A.R)().group.key===t.key,x=_===l.key,T=(0,d.useHistory)(),G=(0,u.useCallback)((0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.delete({force:!0});case 2:T.replace(f.replace(":cookieGroup?",l.key.toString()));case 3:case"end":return e.stop()}}),e)}))),[t,T,l,S,f]);return React.createElement(r.Z,{spinning:E},React.createElement(M.Z,{title:y,placement:"bottomLeft"},React.createElement("span",null,v)),S&&R?React.createElement(a.Z,{visible:C,arrowPointAtCenter:!0,content:React.createElement(k,{edit:t,onClose:function(){return w(!1)}}),placement:"bottomLeft"},React.createElement(se.Z,{onClick:function(){return w(!0)},style:{margin:0,marginLeft:5}})):null,S&&R?x?React.createElement(M.Z,{placement:"bottomLeft",arrowPointAtCenter:!0,overlay:(0,p.__)('The "%s" service group cannot be deleted.',v)},React.createElement(ue.Z,{style:{margin:0,marginLeft:5,color:"#d2d2d2"}})):React.createElement(P.Z,{title:(0,N.E)([(0,p.__)("Are you sure you want to delete this service group? All services within this group will also be deleted. Consider moving them before you delete the service group.")].concat((0,O.Z)(i)).join("\n\n")),placement:"bottom",onConfirm:G,okText:(0,p.__)("Delete"),cancelText:(0,p.__)("Cancel"),overlayStyle:{maxWidth:350},onVisibleChange:function(){return w(!1)}},React.createElement(ue.Z,{style:{margin:0,marginLeft:5}})):null)})),pe=n(1312),de=i.Z.TabPane,ge=(0,u.lazy)((function(){return n.e(184).then(n.bind(n,5979)).then((function(e){var t=e.TcfRouter;return(0,pe.m)("tcf",React.createElement(t,null))}))})),fe=(0,m.Pi)((function(){var e=(0,g.m)(),t=e.cookieStore,n=e.optionStore,l=t.essentialGroup,m=t.groups.sortedGroups,f=(0,d.useRouteMatch)(),R=f.params,E=f.path,h=f.isExact,_=(0,u.useState)(!1),v=(0,c.Z)(_,2),y=v[0],b=v[1],Z=R.cookieGroup||(null==l?void 0:l.key.toString()),C=!R.cookieGroup,w=(0,d.useHistory)(),S=n.bannerActive,x=n.isOnlyRcbCookieCreated,T=n.tcf,M=t.groups,P=function(e){var t=(0,u.useRef)(),n=(0,g.m)().cookieStore,a=n.groups.entries.size,r=n.essentialGroup;return(0,u.useLayoutEffect)((function(){if(t.current&&e&&a>1){var r=V()(t.current).find(".rcb-antd-tabs-nav-wrap > div:first");return r.sortable({items:"> .rcb-antd-tabs-tab",helper:"clone",cancel:"",axis:"x",start:function(e,t){t.placeholder.height("auto")},update:function(){var e=r.find("> div > [aria-controls]").toArray().map((function(e){return+e.getAttribute("aria-controls").split("-").pop()}));n.groups.orderCookieGroups(e)}}),function(){return r.sortable("destroy")}}return function(){}}),[t.current,a,n,r]),t}(!C),O=(0,u.useCallback)((function(){C&&t.essentialGroup&&w.replace(E.replace(":cookieGroup?",T?"tcf-vendors":t.essentialGroup.key.toString()))}),[C,t,T]);return(0,u.useEffect)((function(){var e=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchGroups();case 2:O();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,u.useEffect)((function(){O()}),[C]),C||0===m.length?React.createElement(r.Z,{style:{margin:"auto",marginTop:15}}):React.createElement(r.Z,{spinning:M.busy},React.createElement("div",{ref:P},React.createElement(d.Switch,null,React.createElement(React.Fragment,null,!S&&!x&&React.createElement("div",{className:"notice notice-warning inline below-h2 notice-alt",style:{margin:"10px 0 0 0"}},React.createElement("p",null,(0,p.__)("The cookie banner is globally deactivated in the settings and is therefore not displayed on your website.")," ","• ",React.createElement("a",{href:"#/settings"},(0,p.__)("Enable now")))),React.createElement(i.Z,{destroyInactiveTabPane:!0,activeKey:Z,tabBarExtraContent:h&&-1===["tcf-vendors"].indexOf(Z)&&React.createElement(a.Z,{visible:y,content:React.createElement(k,{onClose:function(){return b(!1)}}),placement:"bottomRight"},React.createElement("button",{className:"button button-primary button-large",style:{marginTop:6},onClick:function(){return b(!y)}},(0,p.__)("Add group"))),onTabClick:function(e){w.push(E.replace(":cookieGroup?",e))}},T&&React.createElement(React.Fragment,null,React.createElement(de,{tab:(0,p.__)("TCF Vendors"),key:"tcf-vendors"},React.createElement(ge,null)),React.createElement(de,{tab:React.createElement("span",null,"•"),disabled:!0})),m.map((function(e){return React.createElement(de,{tab:React.createElement(me,{group:e}),key:e.key.toString()},React.createElement(le,null))})))))))}))}}]);
//# sourceMappingURL=chunk-config-tab-cookies.lite.js.map?ver=76784ebdac98d22b7776